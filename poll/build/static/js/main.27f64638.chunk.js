(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{11:function(e,t,a){e.exports={logInForm:"Login_logInForm__2pIZJ",container:"Login_container__1KAHG",log:"Login_log__xIC05",foot:"Login_foot__2SNm4",popup:"Login_popup__35Acd",modal:"Login_modal__3TNE_"}},14:function(e,t,a){e.exports={container:"CreatePoll_container__O3LSM",poll:"CreatePoll_poll__uU535",choice:"CreatePoll_choice__ZSxU4",question:"CreatePoll_question__1lu57",svgbutton:"CreatePoll_svgbutton__3MUpI",otherbutton:"CreatePoll_otherbutton__zHLg9"}},20:function(e,t,a){e.exports={pollcard:"Polls_pollcard__K5sbP",option:"Polls_option__3PdOb",link:"Polls_link__LoSRt"}},21:function(e,t,a){e.exports={question:"VoteChart_question__2H8hM",container:"VoteChart_container__1hYWt",pie:"VoteChart_pie__3JIPn"}},38:function(e,t,a){e.exports={button:"Button_button__2Ce79"}},40:function(e,t,a){e.exports=a(70)},45:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),l=a.n(o),c=(a(45),a(1)),s=a.n(c),i=a(5),u=a(4),m=a(19),p=a(20),d=a.n(p),h=a(10);var b=function(e){var t=e.item,a=void 0===t?"horferfer":t;return Object(m.a)(e,["item"]),r.a.createElement(h.b,{to:{pathname:"/VoteChart",state:{item:a}},className:d.a.link},r.a.createElement("div",{className:d.a.pollcard},r.a.createElement("h1",null,a.question),r.a.createElement("div",null,Object.keys(a.options).map((function(e){var t=0===a.totalVotes?0:Math.round(a.options[e]/a.totalVotes*100);return r.a.createElement("div",{className:d.a.option,key:e},r.a.createElement("span",null,e),r.a.createElement("span",{style:{width:3*t,backgroundColor:"green"}}),r.a.createElement("span",null,"%",t))})))))},f=a(2),E=a(21),v=a.n(E),g=a(13),_=a(12),w=a.n(_),C=a(37),y=a.n(C),P=a(38),x=a.n(P);var N=function(e){var t=e.onFunction,a=e.className,n=e.children,o=Object(m.a)(e,["onFunction","className","children"]);return r.a.createElement("button",Object.assign({onClick:t,className:y()(x.a.button,a)},o),n)},S=a(39),O=["#AAAAAA","#0074D9","#2ECC40","#7FDBFF","#FF851B","#39CCCC","#3D9970","#01FF70","#DDDDDD","#FFDC00","#FF4136"];var k=function(e){var t=Object(g.a)(),a=t.register,n=t.handleSubmit,o=e.location.state.item,l=Object.keys(o.options).map((function(e,t){return{title:e,color:O[t],value:o.options[e]}})),c=o._id,u=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],"vote"===(n=Object.keys(t))[0]?a.push(t[n[0]]):n.forEach((function(e){t[e]&&a.push(e)})),r={pollId:c,selectedOptionIndex:a},e.next=6,w.a.post("http://35.209.140.129:8082/poll/vote",r);case 6:o=e.sent,console.log(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:v.a.container},r.a.createElement("form",{onSubmit:n(u)},r.a.createElement("div",{className:v.a.question},o.question),Object.keys(o.options).map((function(e,t){return r.a.createElement("label",null,!1===o.allowMultiChoice&&r.a.createElement("input",{name:"vote",type:"radio",value:t,ref:a}),o.allowMultiChoice&&r.a.createElement("input",{name:t,type:"checkbox",ref:a}),e,r.a.createElement("span",null,"    ",o.options[e]))})),r.a.createElement(N,{type:"submit"},"Vote")),r.a.createElement(S.PieChart,{data:l,className:v.a.pie}))},j=a(11),q=a.n(j);var I=function(e){e.children;var t=Object(g.a)(),a=t.register,o=t.handleSubmit,l=Object(n.useState)(""),c=Object(u.a)(l,2),m=c[0],p=c[1],d=Object(n.useState)(!1),h=Object(u.a)(d,2),b=h[0],E=h[1];function v(){return(v=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://35.209.140.129:8082/user/logIn",e.next=3,w.a.post("http://35.209.140.129:8082/user/logIn",t);case 3:return a=e.sent,p(a.data.message),E(!0),e.next=8,new Promise((function(e){return setTimeout(e,2e3)}));case 8:if(E(!1),"Success"!==a.data.message){e.next=12;break}return localStorage.setItem("email",t.email),e.abrupt("return",r.a.createElement(f.a,{to:{pathname:"/",state:{email:t.email}}}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:q.a.container},r.a.createElement("form",{className:q.a.logInForm,onSubmit:o((function(e){return v.apply(this,arguments)}))},r.a.createElement("input",{ref:a({required:!0}),name:"email",type:"email",placeholder:"Email"}),r.a.createElement("input",{ref:a({required:!0}),name:"password",type:"password",placeholder:"Password"}),r.a.createElement("div",{className:q.a.foot},b&&r.a.createElement("div",{className:q.a.popup},r.a.createElement("p",{className:q.a.modal},m)),r.a.createElement(N,{className:q.a.log,type:"submit"},"Log In"))),"Success"===m&&r.a.createElement(f.a,{to:"/Pollcard"}))};var F=function(){var e,t,a,o=Object(g.a)(),l=o.register,c=o.handleSubmit,m=o.watch,p=o.errors,d=m("password",""),h=m("rePassword",""),b=Object(n.useState)(""),E=Object(u.a)(b,2),v=E[0],_=E[1];function C(){return(C=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"http://35.209.140.129:8082/user/create",t.password!==t.rePassword){e.next=9;break}return e.next=5,w.a.post("http://35.209.140.129:8082/user/create",t);case 5:a=e.sent,console.log(a),_(a.data.message),"Success"===a.data.message&&(localStorage.setItem("email",t.email),console.log("done"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:q.a.container},r.a.createElement("form",{className:q.a.logInForm,onSubmit:c((function(e){return C.apply(this,arguments)}))},r.a.createElement("input",{ref:l({required:!0}),name:"email",type:"email",placeholder:"Email"}),r.a.createElement("input",{ref:l({required:!0,maxLength:30,minLength:7}),name:"password",type:"password",placeholder:"Password"}),"required"===(null===(e=p.password)||void 0===e?void 0:e.type)&&"Your input is required","minLength"===(null===(t=p.password)||void 0===t?void 0:t.type)&&"Your input is to short",r.a.createElement("input",{ref:l({required:!0}),name:"rePassword",type:"password",placeholder:"Confirm Password"}),"required"===(null===(a=p.rePassword)||void 0===a?void 0:a.type)&&"Your input is required",d!==h&&r.a.createElement("div",null,"passwords should be the same"),r.a.createElement(N,{className:q.a.log,type:"submit"},"Log In")),"Success"===v&&r.a.createElement(f.a,{to:"/Pollcard"}))},L=(a(69),a(14)),M=a.n(L);var A=function(e){var t=e.id;return e.props,n.createElement("svg",{id:t,width:"30px",height:"30px",fill:"white",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 24 24"},n.createElement("path",{d:"M11.5 0c6.347 0 11.5 5.153 11.5 11.5s-5.153 11.5-11.5 11.5-11.5-5.153-11.5-11.5 5.153-11.5 11.5-11.5zm0 1c5.795 0 10.5 4.705 10.5 10.5s-4.705 10.5-10.5 10.5-10.5-4.705-10.5-10.5 4.705-10.5 10.5-10.5zm-6.5 10h13v1h-13v-1z"}))};var D=function(){var e=Object(n.useState)(["",""]),t=Object(u.a)(e,2),a=t[0],o=t[1],l=Object(g.a)(),c=l.register,s=l.handleSubmit,i=function(e){if(""===e[0]|""===e[1])return alert("You must enter at least 2 options"),!1;console.log("submitted");for(var t=[],n=0;n<a.length;n++)t.push(e[n]);null===e.question&&alert("question cannot be empty");var r={question:e.question,allowMultiChoice:e.allowMultiChoice,IPCheck:e.IPCheck,options:t};w.a.post("http://35.209.140.129:8082/poll/create",r)};function m(e){parseInt(e.target.name)===a.length-1&&(a.push(" "),o(a)),a[e.target.name]=e.target.value,o(a)}function p(e){var t=e.target.id;2!==a.length&&(a.splice(t,1),o(a))}return r.a.createElement("div",{className:M.a.container},r.a.createElement("form",{onSubmit:s(i),className:M.a.poll},r.a.createElement("input",{type:"text",name:"question",placeholder:"Enter your Question",className:M.a.question,ref:c({required:!0})}),r.a.createElement("label",{className:M.a.choice},"Allow Multiple Choice",r.a.createElement("input",{name:"allowMultiChoice",type:"checkbox",ref:c})),r.a.createElement("label",{className:M.a.choice},"Ip check",r.a.createElement("input",{name:"IPCheck",type:"checkbox",ref:c})),a.map((function(e,t){return r.a.createElement("div",{name:t,className:M.a.otherbutton},r.a.createElement("input",{ref:c,name:t,value:a[t],onChange:m,type:"text",placeholder:"Write an option"}),r.a.createElement("button",{id:t,onClick:p,className:M.a.svgbutton},r.a.createElement(A,{id:t,name:t})))})),r.a.createElement(N,{onFunction:i},"Submit")))};var V=function(){var e=localStorage.getItem("email"),t=Object(n.useState)(),a=Object(u.a)(t,2),o=a[0],l=a[1];return fetch("http://35.209.140.129:8082/poll/getAll").then(function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,l(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o?r.a.createElement(h.a,{className:"App"},r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",null,r.a.createElement(h.b,{to:"/Pollcard"},"Polls"),r.a.createElement(h.b,{to:"/CreatePoll"},"Create poll")),r.a.createElement("div",null,null==e?r.a.createElement(h.b,{to:"/Login"},"Login"):r.a.createElement(h.b,{to:"/userPage/:"+e},e),null==e&&r.a.createElement(h.b,{to:"/Signup"},"Sign Up"))),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/VoteChart",component:k}),r.a.createElement(f.b,{path:"/Login",component:I}),r.a.createElement(f.b,{path:"/Signup",component:F}),r.a.createElement(f.b,{path:"/CreatePoll",component:D}),r.a.createElement(f.b,{path:["/Pollcard","/"]},o.polls.map((function(e){return r.a.createElement(b,{key:e._id,item:e},e.question)}))))):r.a.createElement("div",null,"Loading")};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.27f64638.chunk.js.map